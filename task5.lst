GAS LISTING task5.S 			page 1


   1              	.include "my-macro"
   1              	/*
   2              	 * ÐœÐ°ÐºÑ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹.
   3              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
   4              	 * 	- ÐºÐ¾Ð´ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹
   5              	 *
   6              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
   7              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 exit'
   8              	*/
   9              	.macro Exit ret_val
  10              		movl $1, %eax 		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° exit
  11              		movl \ret_val, %ebx 	# ÐºÐ¾Ð´ Ð²Ñ‹Ñ…Ð¾Ð´Ð°
  12              		int $0x80 		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  13              	.endm
  14              	
  15              	
  16              	/*
  17              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¸Ð
  18              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  19              	 * 	- Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„Ñ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  20              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  21              	 *	- Ð² %eax ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
  22              	 *	- Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ buf_addr - ÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»
  23              	 *
  24              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  25              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man 2 read'
  26              	*/
  27              	.macro Getchar buf_addr
  28              		movl $3, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° read
  29              		movl $0, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ð²Ð¾Ð´Ð°
  30              		movl \buf_addr, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° (Ð¾Ð½ Ð¶Ðµ - Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐº
  31              		     			# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°)
  32              		movl $1, %edx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ
  33              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  34              	.endm
  35              	
  36              	/*
  37              	 * ÐœÐ°Ñ€Ð¾Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ñ‹ Ð²Ñ‹Ð²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð² ÑÑ‚Ð°Ð½Ð´
  38              	 * ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
  39              	 * 	- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°.
  40              	 *
  41              	 * ÐŸÑ€Ð¸Ð¼ÐµÑ‚Ñ€ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð°:
  42              	 *	Puts "Ð¢ÐµÐºÑÑ‚ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸"
  43              	 *
  44              	 * Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:
  45              	 *	- Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð² ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹ Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾Ðº
  46              	 *	  Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸
  47              	 *
  48              	 * ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð²Ð° Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ñ‹: %e
  49              	 * Ð¡Ð¼. Ñ‚Ð°ÐºÐ¶Ðµ 'man puts', 'man 2 write'
  50              	*/
  51              	.macro Puts string
  52              	.data
  53              	    str\@: 	.ascii "\string\n"  # Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð´Ð»
  54              	
  55              	    strlen\@ = 	. - str\@           # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ñ‹ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  56              	
GAS LISTING task5.S 			page 2


  57              	.text
  58              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  59              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  60              		movl $str\@, %ecx	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾
  61              		movl $strlen\@, %edx 	# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  62              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  63              	.endm
  64              	
  65              	.macro PutsVector vec
  66              		movl $4, %eax		# Ð½Ð¾Ð¼ÐµÑ€ ÑÐ¸ÑÑ‚. Ð²Ñ‹Ð·Ð¾Ð²Ð° write
  67              		movl $1, %ebx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 1: Ð´ÐµÑÐºÑ€Ð¸Ð¿Ñ‚Ð¾Ñ€ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  68              		mov \vec, %ecx		# Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 2: Ð°Ð´Ñ€ÐµÑ Ð¿Ð°Ð¼ÑÑ‚Ð¸ Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ð¼Ð¸ ÑÐ¸Ð¼Ð²Ð¾Ð»
  69              		movl $24, %edx # Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ 3: ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð°Ð¹Ñ‚Ð¾Ð² Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
  70              		int $0x80		# Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¹ Ð²Ñ‹Ð·Ð¾Ð²
  71              	.endm
   2              	
   3              	.bss
   4              		.lcomm buf, 100		# Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð². Ð Ð
   5              		.lcomm c, 1		# Ð‘ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ñ‡Ñ‚ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°. Ð Ð°Ð·Ð¼ÐµÑ€ - 1 Ð±
   6              	
   7              	.data
   8 0000 07000000 		k: .long 7
   9 0004 07000000 		l: .long 7          
  10 0008 00000000 		massiv: .long 0,0,0,0,0,0     # Ð’ÐµÐºÑ‚Ð¾Ñ€ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° (6 Ñ†Ð¸Ñ„Ñ€ Ð¸ 5 Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð²
  10      00000000 
  10      00000000 
  10      00000000 
  10      00000000 
  11              		# ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð²ÐµÐºÑ‚Ð¾Ñ€Ð° ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ Ñ„Ð¾Ñ€Ð¼ÑƒÐ»Ðµ b(i) = A(k,i) + A(i,l)
  12              		# 	Ð”Ð²ÑƒÐ¼ÐµÑ€Ð½Ñ‹Ð¹ Ð¼Ð°ÑÑÐ¸Ð² 6 x 6
  13              	
  14              		Smatrix:
  15 0020 0B000000 			.long 11,12,13,14,15,16
  15      0C000000 
  15      0D000000 
  15      0E000000 
  15      0F000000 
  16 0038 15000000 			.long 21,22,23,24,25,26
  16      16000000 
  16      17000000 
  16      18000000 
  16      19000000 
  17 0050 1F000000 			.long 31,32,33,34,35,36
  17      20000000 
  17      21000000 
  17      22000000 
  17      23000000 
  18 0068 29000000 			.long 41,42,43,44,45,46
  18      2A000000 
  18      2B000000 
  18      2C000000 
  18      2D000000 
  19 0080 33000000 			.long 51,52,53,54,55,56
  19      34000000 
  19      35000000 
  19      36000000 
  19      37000000 
GAS LISTING task5.S 			page 3


  20 0098 3D000000 			.long 61,62,63,64,65,66
  20      3E000000 
  20      3F000000 
  20      40000000 
  20      41000000 
  21              	
  22              	
  23              	.text
  24              	.global _start
  25              	
  26              	_start:
  27 0000 29F6     		sub	%esi, %esi     # ÑƒÐºÐ°Ð·Ð°Ñ‚ÐµÐ»ÑŒ Ð°Ð´Ñ€ÐµÑÐ° Ð±Ð°Ð¹Ñ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² (
  28              		Puts "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ ÑÑ‚Ñ€Ð¾ÐºÐ¸ k"
  28              	> .data
  28 00b0 D092D0B2 	>  str0:.ascii "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ ÑÑ‚Ñ€Ð¾ÐºÐ¸ k\n"
  28      D0B5D0B4 
  28      D0B8D182 
  28      D0B520D0 
  28      BDD0BED0 
  28              	> 
  28              	>  strlen0 =. - str0
  28              	> 
  28              	> .text
  28 0002 B8040000 	>  movl $4,%eax
  28      00
  28 0007 BB010000 	>  movl $1,%ebx
  28      00
  28 000c B9B00000 	>  movl $str0,%ecx
  28      00
  28 0011 BA290000 	>  movl $strlen0,%edx
  28      00
  28 0016 CD80     	>  int $0x80
  29              	
  30              	kbd_input:
  31              		Getchar $c          # Ð¼Ð°ÐºÑ€Ð¾Ð²Ñ‹Ð·Ð¾Ð² Ð²Ð²Ð¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° ÑÐ¾ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð³Ð¾
  31 0018 B8030000 	>  movl $3,%eax
  31      00
  31 001d BB000000 	>  movl $0,%ebx
  31      00
  31 0022 B9640000 	>  movl $c,%ecx
  31      00
  31              	>  
  31 0027 BA010000 	>  movl $1,%edx
  31      00
  31 002c CD80     	>  int $0x80
  32              	
  33 002e 83F800   		cmpl $0, %eax 	# ÐšÐ¾Ð½ÐµÑ† Ñ„Ð°Ð¹Ð» - EOF (Ð²Ð²ÐµÐ´ÐµÐ½Ð¾ 0 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²) ?
  34 0031 0F842401 		je stop
  34      0000
  35              	
  36 0037 803D6400 		cmpb $'\n', c 	# ÑÑ‚Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð» Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸ ?
  36      00000A
  37 003e 7458     		je get_digit 	# Ð”Ð - Ð½Ð° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ñ†Ð¸Ñ„Ñ€Ñ‹ Ð² Ð±ÑƒÑ„ÐµÑ€
  38              	
  39 0040 83FE64   		cmp $100, %esi 	# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð±ÑƒÑ„ÐµÑ€Ð°
  40 0043 7438     		je overflow
  41              	
GAS LISTING task5.S 			page 4


  42 0045 803D6400 		cmpb $'6', c  	# ÐºÐ¾Ð´ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '6' ?
  42      000036
  43 004c 7717     		ja print_err_msg	# Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  44 004e 803D6400 		cmpb $'1', c	# ÐºÐ¾Ð´ Ð¼ÐµÐ½ÑŒÑˆÐµ ÐºÐ¾Ð´Ð° ÑÐ¸Ð¼Ð²Ð¾Ð»Ð° '1' ?
  44      000031
  45 0055 720E     		jb print_err_msg # Ð”Ð - Ð½Ð° Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  46              	
  47              	
  48 0057 A0640000 		movb c, %al         # ÐºÐ¾Ð´ Ð¸Ð· Ñ Ð¿Ð¸ÑˆÐµÐ¼ Ð² al
  48      00
  49 005c 88860000 		movb %al, buf(%esi) # Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ al (Ð²Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ¸Ð¼Ð²Ð¾Ð»)
  49      0000
  50              												# Ð°Ð´Ñ€ÐµÑÑƒ buf + esi (Ð±ÑƒÑ„ÐµÑ€ Ð´Ð»Ñ Ð²Ð²Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)
  51 0062 46       		incl %esi						# ÑƒÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð°Ð´Ñ€ÐµÑ Ð±ÑƒÑ„ÐµÑ€Ð° Ð´Ð»Ñ ÑÐ»ÐµÐ´ÑƒÑ
  52              	
  53 0063 EBB3     		jmp kbd_input	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  54              	
  55              	print_err_msg:
  56              		Puts "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ Ð¾Ñ‚ 1 Ð´Ð¾ 6"	# Ð²Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ
  56              	> .data
  56 00d9 D092D0B2 	>  str2:.ascii "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ñ†Ð¸Ñ„Ñ€Ñƒ Ð¾Ñ‚ 1 Ð´Ð¾ 6\n"
  56      D0B5D0B4 
  56      D0B8D182 
  56      D0B520D1 
  56      86D0B8D1 
  56              	> 
  56              	>  strlen2 =. - str2
  56              	> 
  56              	> .text
  56 0065 B8040000 	>  movl $4,%eax
  56      00
  56 006a BB010000 	>  movl $1,%ebx
  56      00
  56 006f B9D90000 	>  movl $str2,%ecx
  56      00
  56 0074 BA280000 	>  movl $strlen2,%edx
  56      00
  56 0079 CD80     	>  int $0x80
  57 007b EB9B     		jmp kbd_input 	# Ð½Ð° Ð²Ð²Ð¾Ð´ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°
  58              	
  59              	overflow:
  60              		Puts "Ð‘ÑƒÑ„ÐµÑ€ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½!"
  60              	> .data
  60 0101 D091D183 	>  str3:.ascii "Ð‘ÑƒÑ„ÐµÑ€ Ð¿ÐµÑ€ÐµÐ¿Ð¾Ð»Ð½ÐµÐ½!\n"
  60      D184D0B5 
  60      D18020D0 
  60      BFD0B5D1 
  60      80D0B5D0 
  60              	> 
  60              	>  strlen3 =. - str3
  60              	> 
  60              	> .text
  60 007d B8040000 	>  movl $4,%eax
  60      00
  60 0082 BB010000 	>  movl $1,%ebx
  60      00
  60 0087 B9010100 	>  movl $str3,%ecx
GAS LISTING task5.S 			page 5


  60      00
  60 008c BA210000 	>  movl $strlen3,%edx
  60      00
  60 0091 CD80     	>  int $0x80
  61 0093 E9C30000 		jmp stop
  61      00
  62              	
  63              	get_digit:
  64 0098 83FE00   		cmp $0, %esi
  65 009b 0F8477FF 		je kbd_input
  65      FFFF
  66              	
  67 00a1 4E       		decl %esi      
  68 00a2 29C0     		sub %eax, %eax
  69 00a4 8A860000 		movb buf(%esi), %al
  69      0000
  70 00aa 83E830   		sub $48, %eax
  71              	
  72 00ad 833D0000 		cmpl $7, k              #Ð•ÑÐ»Ð¸ ÐµÑ‰Ðµ Ð½Ðµ Ð²Ð²Ð¾Ð´Ð¸Ð»Ð¸ k
  72      000007
  73 00b4 7402     		je move_to_k
  74              	
  75 00b6 EB29     		jmp move_to_l
  76              	
  77              	move_to_k:
  78 00b8 A3000000 		movl %eax, k
  78      00
  79 00bd C6050000 		movb $0, buf
  79      000000
  80 00c4 29F6     		sub %esi, %esi 		# ÐžÐ±Ð½ÑƒÐ»ÑÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€ Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐµÐ³Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð
  81              		Puts "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° l"
  81              	> .data
  81 0122 D092D0B2 	>  str4:.ascii "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€ ÑÑ‚Ð¾Ð»Ð±Ñ†Ð° l\n"
  81      D0B5D0B4 
  81      D0B8D182 
  81      D0B520D0 
  81      BDD0BED0 
  81              	> 
  81              	>  strlen4 =. - str4
  81              	> 
  81              	> .text
  81 00c6 B8040000 	>  movl $4,%eax
  81      00
  81 00cb BB010000 	>  movl $1,%ebx
  81      00
  81 00d0 B9220100 	>  movl $str4,%ecx
  81      00
  81 00d5 BA2B0000 	>  movl $strlen4,%edx
  81      00
  81 00da CD80     	>  int $0x80
  82 00dc E937FFFF 		jmp kbd_input
  82      FF
  83              	
  84              	move_to_l:
  85 00e1 A3040000 		movl %eax, l
  85      00
  86 00e6 C6050000 		movb $0, buf
GAS LISTING task5.S 			page 6


  86      000000
  87 00ed 29F6     		sub %esi, %esi
  88              		Puts "Ð¡Ñ‚Ñ€Ð¾ÑŽ Ð²ÐµÐºÑ‚Ð¾Ñ€..."
  88              	> .data
  88 014d D0A1D182 	>  str5:.ascii "Ð¡Ñ‚Ñ€Ð¾ÑŽ Ð²ÐµÐºÑ‚Ð¾Ñ€...\n"
  88      D180D0BE 
  88      D18E20D0 
  88      B2D0B5D0 
  88      BAD182D0 
  88              	> 
  88              	>  strlen5 =. - str5
  88              	> 
  88              	> .text
  88 00ef B8040000 	>  movl $4,%eax
  88      00
  88 00f4 BB010000 	>  movl $1,%ebx
  88      00
  88 00f9 B94D0100 	>  movl $str5,%ecx
  88      00
  88 00fe BA1B0000 	>  movl $strlen5,%edx
  88      00
  88 0103 CD80     	>  int $0x80
  89 0105 29F6     		sub %esi, %esi
  90 0107 FF0D0000 		decl k 			# ÐžÑ‚ÑÑ‡ÐµÑ‚ Ñ 0
  90      0000
  91 010d FF0D0400 		decl l 			# ÐžÑ‚ÑÑ‡ÐµÑ‚ Ñ 0
  91      0000
  92              	
  93              	get_k_i:
  94 0113 B8180000 		movl $24, %eax 		# ÐŸÐ¾Ð¼ÐµÑ‰Ð°ÐµÐ¼ 24 Ð² Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€
  94      00
  95 0118 8B1D0000 		mov k, %ebx		# Ð’ ebx Ð¿Ð¾Ð¼ÐµÑ‰Ð°ÐµÐ¼ Ð°Ð´Ñ€ÐµÑ ÑÑ‚Ñ€Ð¾ÐºÐ¸
  95      0000
  96 011e F7E3     		mul %ebx 		# Ð£Ð¼Ð½Ð¾Ð¶Ð°ÐµÐ¼ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€ Ð½Ð° 24
  97              		
  98 0120 8B84B020 		mov Smatrix(%eax,%esi,4), %eax # ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ (k,i) Ð² Ñ€ÐµÐ³.
  98      000000
  99              	
 100 0127 EB20     		jmp add_k_i
 101              	
 102              	get_i_l:
 103 0129 B8180000 		movl $24, %eax
 103      00
 104 012e 89F3     		mov %esi, %ebx
 105 0130 F7E3     		mul %ebx
 106              		
 107 0132 8B1D0400 		mov l, %ebx		# l ÑÑ‚Ð¾Ð»Ð±ÐµÑ† Ð¼Ð°Ñ‚Ñ€Ð¸Ñ†Ñ‹
 107      0000
 108 0138 8B849820 		mov Smatrix(%eax,%ebx,4), %eax # ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ (i,l) Ð² Ñ€ÐµÐ³.
 108      000000
 109              	
 110 013f EB11     		jmp add_i_l
 111              	
 112              	next:
 113 0141 46       		incl %esi
 114 0142 83FE06   		cmpl $6, %esi
 115 0145 72CC     		jb get_k_i
GAS LISTING task5.S 			page 7


 116 0147 EB12     		jmp stop
 117              	
 118              	add_k_i:
 119 0149 0104B508 		addl %eax, massiv(,%esi,4)
 119      000000
 120 0150 EBD7     		jmp get_i_l
 121              	
 122              	add_i_l:
 123 0152 0104B508 		addl %eax, massiv(,%esi,4)
 123      000000
 124 0159 EBE6     		jmp next
 125              	
 126              	stop:
 127              	
 128              	  Exit $0
 128 015b B8010000 	>  movl $1,%eax
 128      00
 128 0160 BB000000 	>  movl $0,%ebx
 128      00
 128 0165 CD80     	>  int $0x80
 129              	
 130              	.end
GAS LISTING task5.S 			page 8


DEFINED SYMBOLS
             task5.S:4      .bss:0000000000000000 buf
             task5.S:4      .bss:0000000000000064 c
             task5.S:8      .data:0000000000000000 k
             task5.S:9      .data:0000000000000004 l
             task5.S:10     .data:0000000000000008 massiv
             task5.S:14     .data:0000000000000020 Smatrix
             task5.S:26     .text:0000000000000000 _start
             task5.S:28     .data:00000000000000b0 str0
             task5.S:28     *ABS*:0000000000000029 strlen0
             task5.S:30     .text:0000000000000018 kbd_input
             task5.S:126    .text:000000000000015b stop
             task5.S:63     .text:0000000000000098 get_digit
             task5.S:59     .text:000000000000007d overflow
             task5.S:55     .text:0000000000000065 print_err_msg
             task5.S:56     .data:00000000000000d9 str2
             task5.S:56     *ABS*:0000000000000028 strlen2
             task5.S:60     .data:0000000000000101 str3
             task5.S:60     *ABS*:0000000000000021 strlen3
             task5.S:77     .text:00000000000000b8 move_to_k
             task5.S:84     .text:00000000000000e1 move_to_l
             task5.S:81     .data:0000000000000122 str4
             task5.S:81     *ABS*:000000000000002b strlen4
             task5.S:88     .data:000000000000014d str5
             task5.S:88     *ABS*:000000000000001b strlen5
             task5.S:93     .text:0000000000000113 get_k_i
             task5.S:118    .text:0000000000000149 add_k_i
             task5.S:102    .text:0000000000000129 get_i_l
             task5.S:122    .text:0000000000000152 add_i_l
             task5.S:112    .text:0000000000000141 next

NO UNDEFINED SYMBOLS
